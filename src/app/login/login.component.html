<section class="d-flex align-center col-flex text-yellow login-section">
    <ng-container *ngIf="checkEmailExistInSys then emailInput; else loginformwrap"> Email input </ng-container>
</section>

<ng-template #loginform>
    <div class="form-container">
        <form #userloginform="ngForm" (ngSubmit)="onSubmit(userloginform)" novalidate>
            <div class="control-group">
                <label for="name">Name</label>
                <input type="text" [(ngModel)]="loginFormModel.name" name="name" #username=ngModel required>

                <div class="invalid-input-container" *ngIf="!username?.valid && (username?.dirty || username?.touched)">
                    <div *ngIf="username?.errors?.['required']">Name is required</div>
                </div>
            </div>
            <div class="control-group">
                <label for="email">Email ID</label>
                <input type="email" [(ngModel)]="loginFormModel.email" name="email" #useremail=ngModel required email>

                <div class="invalid-input-container"
                    *ngIf="!useremail?.valid && (useremail?.dirty || useremail?.touched)">
                    <div *ngIf="useremail?.errors?.['required']">Email is required</div>
                    <div *ngIf="useremail?.errors?.['email']">Valid Email is required</div>
                </div>
            </div>

            <p class="text-center">OR</p>
            <div class="control-group">
                <label for="email">Mobile</label>
                <input type="text" [(ngModel)]="loginFormModel.mobile" name="umobile" #usermobile=ngModel required
                    pattern="^((\\+91-?)|0)?[0-9]{10}$">
                <div class="invalid-input-container"
                    *ngIf="!usermobile?.valid && (usermobile?.dirty || usermobile?.touched)">
                    <div *ngIf="usermobile?.errors?.['required']">Mobile is required</div>
                    <div *ngIf="usermobile?.errors?.['pattern']">Valid mobile number is required</div>
                </div>
            </div>
            <button class="btn-submit w-100" type="submit"
                [disabled]="(!username?.valid) || (!usermobile?.valid ) && (!useremail?.valid)">Login</button>
        </form>
    </div>

</ng-template>

<ng-template #statusmsg>
    <div class="form-container bg-darkestyellow otp-section d-flex col-flex align-center">
        <h2 class="text-center">{{statusMessage}}</h2>
        <form #otpverfyform="ngForm" (ngSubmit)="onVerifySubmit(otpverfyform)" novalidate>
            <div>
                <input type="text" class="otp-field w-50" placeholder="Please enter your otp" name="otp"
                    [(ngModel)]="otpField" required maxlength="4" pattern="\d{4}">
            </div>
            <button class="btn-primary w-100" type="submit" [disabled]="!otpverfyform.valid">Validate</button>
            <p class="text-right" style="cursor: pointer;" (click)="statusMessage = ''">Go to Login Page</p>
        </form>
    </div>
</ng-template>


<ng-template #emailInput>
    <div class="text-center">
        <h1>Your email id please..</h1>
        <div>
            <input type="text" class="email-input w-100">
        </div>
        <button class="btn btn-submit w-100">Go</button>
    </div>
</ng-template>

<ng-template #loginformwrap>
    <ng-container *ngIf="!statusMessage then loginform;else statusmsg"></ng-container>
</ng-template>